<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#FF9F66">
    <meta name="description" content="TrackMate Dashboard - Monitor your activities">
    
    <!-- PWA Meta Tags -->
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="assets/icons/icon-192.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    
    <title>Dashboard - TrackMate</title>
    <link rel="stylesheet" href="assets/css/dashboard.css">
</head>
<body class="dashboard-body">
    <!-- Sidebar -->
    <aside class="sidebar">
        <div class="logo">
            <svg width="40" height="40" viewBox="0 0 60 60" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect x="5" y="5" width="20" height="20" rx="4" fill="#FF9F66"/>
                <rect x="30" y="5" width="20" height="20" rx="4" fill="#9CDDDD"/>
                <rect x="5" y="30" width="20" height="20" rx="4" fill="#9CDDDD"/>
                <rect x="30" y="30" width="20" height="20" rx="4" fill="#FF9F66"/>
            </svg>
        </div>
        
        <nav class="nav-menu">
            <a href="dashboard.html" class="nav-item active">
                <span class="icon">üìä</span>
            </a>
            <a href="calendar.html" class="nav-item">
                <span class="icon">üìÖ</span>
            </a>
            <a href="camera.html" class="nav-item">
                <span class="icon">üì∑</span>
            </a>
            <a href="timer.html" class="nav-item">
                <span class="icon">‚è∞</span>
            </a>
            <a href="reports.html" class="nav-item">
                <span class="icon">üìà</span>
            </a>
            <a href="settings.html" class="nav-item">
                <span class="icon">‚öôÔ∏è</span>
            </a>
        </nav>
        
        <a href="profile.html" class="nav-item profile-icon">
            <span class="icon">üë§</span>
        </a>
    </aside>
    
    <!-- Main Content -->
    <main class="main-content">
        <!-- Header -->
        <header class="header">
            <div class="header-left">
                <div class="logo-icon">
                    <svg width="30" height="30" viewBox="0 0 60 60" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect x="5" y="5" width="20" height="20" rx="4" fill="#FF9F66"/>
                        <rect x="30" y="5" width="20" height="20" rx="4" fill="#9CDDDD"/>
                        <rect x="5" y="30" width="20" height="20" rx="4" fill="#9CDDDD"/>
                        <rect x="30" y="30" width="20" height="20" rx="4" fill="#FF9F66"/>
                    </svg>
                </div>
                <div>
                    <h1 class="header-title">TrackMate - Dashboard</h1>
                    <p class="header-date" id="currentDate">May 5, 2025</p>
                </div>
            </div>
            
            <div class="header-right">
                <button class="icon-btn">üîç</button>
                <button class="icon-btn notification-btn" id="notificationBtn" onclick="toggleNotifications()">
                    üîî
                    <span class="notification-badge" id="notificationBadge">3</span>
                </button>
                <a href="profile.html" class="icon-btn" title="View Profile">üë§</a>
                <button class="icon-btn" onclick="logout()" title="Logout">üö™</button>
            </div>
        </header>
        
        <!-- Notification Dropdown -->
        <div class="notification-dropdown" id="notificationDropdown">
            <div class="notification-header">
                <h3>Notifications</h3>
                <button class="mark-all-read" onclick="markAllAsRead()">Mark all as read</button>
            </div>
            <div class="notification-list" id="notificationList">
                <!-- Notifications will be loaded here -->
            </div>
            <div class="notification-footer">
                <a href="#" onclick="viewAllNotifications()">View all notifications</a>
            </div>
        </div>
        
        <!-- Dashboard Grid -->
        <div class="dashboard-grid">
            <!-- Left Column -->
            <div class="left-column">
                <!-- Quick Stats Cards -->
                <div class="quick-stats-row">
                    <a href="reports.html" class="stat-card">
                        <div class="stat-icon">üíª</div>
                        <div class="stat-info">
                            <div class="stat-label">Work Today</div>
                            <div class="stat-value">6.5<span>h</span></div>
                        </div>
                        <div class="stat-trend up">+12%</div>
                    </a>
                    
                    <a href="reports.html" class="stat-card">
                        <div class="stat-icon">üì±</div>
                        <div class="stat-info">
                            <div class="stat-label">Phone Usage</div>
                            <div class="stat-value">3.2<span>h</span></div>
                        </div>
                        <div class="stat-trend down">-8%</div>
                    </a>
                    
                    <a href="calendar.html" class="stat-card">
                        <div class="stat-icon">üéØ</div>
                        <div class="stat-info">
                            <div class="stat-label">Activities</div>
                            <div class="stat-value">24<span></span></div>
                        </div>
                        <div class="stat-trend up">+3</div>
                    </a>
                    
                    <a href="reports.html" class="stat-card">
                        <div class="stat-icon">‚ö°</div>
                        <div class="stat-info">
                            <div class="stat-label">Focus Score</div>
                            <div class="stat-value">85<span>%</span></div>
                        </div>
                        <div class="stat-trend up">+5%</div>
                    </a>
                </div>
                
                <!-- AI Detection Status -->
                <div class="ai-status-widget">
                    <div class="widget-header">
                        <div class="widget-title">
                            <span class="widget-icon">ü§ñ</span>
                            <h3>AI Activity Detection</h3>
                        </div>
                        <a href="camera.html" class="widget-link">View Camera ‚Üí</a>
                    </div>
                    <div class="ai-status-content">
                        <div class="current-activity">
                            <div class="activity-label">Current Activity</div>
                            <div class="activity-detected" id="currentActivity">2. Working üíª</div>
                            <div class="activity-time">Last detected: Just now</div>
                        </div>
                        <div class="ai-quick-stats">
                            <div class="ai-stat">
                                <div class="ai-stat-value">89%</div>
                                <div class="ai-stat-label">Accuracy</div>
                            </div>
                            <div class="ai-stat">
                                <div class="ai-stat-value">142</div>
                                <div class="ai-stat-label">Detections Today</div>
                            </div>
                            <div class="ai-stat">
                                <div class="ai-stat-value">Active</div>
                                <div class="ai-stat-label">Status</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Today's Schedule -->
                <div class="schedule-widget">
                    <div class="widget-header">
                        <div class="widget-title">
                            <span class="widget-icon">üìÖ</span>
                            <h3>Today's Schedule</h3>
                        </div>
                        <a href="calendar.html" class="widget-link">View Calendar ‚Üí</a>
                    </div>
                    <div class="schedule-items">
                        <div class="schedule-item">
                            <div class="schedule-time">09:00 AM</div>
                            <div class="schedule-info">
                                <div class="schedule-title">Team Meeting</div>
                                <div class="schedule-duration">1 hour</div>
                            </div>
                            <div class="schedule-status upcoming">Upcoming</div>
                        </div>
                        <div class="schedule-item">
                            <div class="schedule-time">02:00 PM</div>
                            <div class="schedule-info">
                                <div class="schedule-title">Project Review</div>
                                <div class="schedule-duration">2 hours</div>
                            </div>
                            <div class="schedule-status upcoming">Upcoming</div>
                        </div>
                        <div class="schedule-item">
                            <div class="schedule-time">05:30 PM</div>
                            <div class="schedule-info">
                                <div class="schedule-title">Workout Session</div>
                                <div class="schedule-duration">45 min</div>
                            </div>
                            <div class="schedule-status upcoming">Upcoming</div>
                        </div>
                    </div>
                </div>
                
                <!-- Productivity Graph -->
                <div class="productivity-graph">
                    <div class="graph-header">
                        <h3 class="section-title">Weekly Activity Overview</h3>
                        <a href="reports.html" class="view-reports-link">View Full Report ‚Üí</a>
                    </div>
                    <div class="chart-wrapper">
                        <canvas id="productivityChart"></canvas>
                    </div>
                    <div class="chart-legend">
                        <span class="legend-item"><span class="dot work-dot"></span>Working</span>
                        <span class="legend-item"><span class="dot phone-dot"></span>Phone Usage</span>
                        <span class="legend-item"><span class="dot sleep-dot"></span>Sleep</span>
                    </div>
                </div>
                
                <!-- Active Timers Widget -->
                <div class="timers-widget">
                    <div class="widget-header">
                        <div class="widget-title">
                            <span class="widget-icon">‚è∞</span>
                            <h3>Active Timers & Alarms</h3>
                        </div>
                        <a href="timer.html" class="widget-link">Manage Timers ‚Üí</a>
                    </div>
                    <div class="timers-content">
                        <div class="timer-item pomodoro-active">
                            <div class="timer-icon">üçÖ</div>
                            <div class="timer-info">
                                <div class="timer-name">Pomodoro Session</div>
                                <div class="timer-countdown">15:32 remaining</div>
                            </div>
                            <button class="timer-action-btn">Pause</button>
                        </div>
                        <div class="timer-item">
                            <div class="timer-icon">‚è∞</div>
                            <div class="timer-info">
                                <div class="timer-name">Lunch Break</div>
                                <div class="timer-countdown">in 1h 25m</div>
                            </div>
                            <button class="timer-action-btn secondary">Snooze</button>
                        </div>
                    </div>
                </div>
                
                <!-- Quick Actions -->
                <div class="quick-actions-widget">
                    <h3 class="widget-subtitle">Quick Actions</h3>
                    <div class="quick-actions-grid">
                        <a href="camera.html" class="action-card">
                            <div class="action-icon">üì∑</div>
                            <div class="action-label">Start Camera</div>
                        </a>
                        <a href="timer.html" class="action-card">
                            <div class="action-icon">‚è±Ô∏è</div>
                            <div class="action-label">New Timer</div>
                        </a>
                        <a href="calendar.html" class="action-card">
                            <div class="action-icon">‚ûï</div>
                            <div class="action-label">Add Event</div>
                        </a>
                        <a href="reports.html" class="action-card">
                            <div class="action-icon">üìä</div>
                            <div class="action-label">View Reports</div>
                        </a>
                    </div>
                </div>
                
                <footer class="dashboard-footer">
                    <span>TrackMate ¬© 2025</span>
                    <span>Stay Productive & Healthy</span>
                </footer>
            </div>
            
            <!-- Right Column - User & Insights Panel -->
            <div class="right-column">
                <!-- User Profile Card -->
                <div class="user-profile-card">
                    <div class="profile-avatar">
                        <div class="avatar-circle">
                            <span class="avatar-text" id="avatarText">U</span>
                        </div>
                    </div>
                    <h3 class="profile-name" id="profileName">User</h3>
                    <p class="profile-email" id="profileEmail">user@trackmate.com</p>
                    <button class="edit-profile-btn" onclick="openEditProfileModal()">
                        <span>‚úèÔ∏è</span> Edit Profile
                    </button>
                </div>
                
                <!-- Today's Goals -->
                <div class="goals-widget">
                    <h3 class="widget-title-sidebar">Today's Goals</h3>
                    <div class="goal-item">
                        <div class="goal-header">
                            <span class="goal-icon">üíª</span>
                            <span class="goal-name">Work 8 hours</span>
                        </div>
                        <div class="goal-progress-bar">
                            <div class="goal-progress-fill" style="width: 81%"></div>
                        </div>
                        <div class="goal-stats">
                            <span class="goal-current">6.5h</span>
                            <span class="goal-target">/ 8h</span>
                        </div>
                    </div>
                    
                    <div class="goal-item">
                        <div class="goal-header">
                            <span class="goal-icon">üì±</span>
                            <span class="goal-name">Limit phone to 3h</span>
                        </div>
                        <div class="goal-progress-bar warning">
                            <div class="goal-progress-fill" style="width: 93%"></div>
                        </div>
                        <div class="goal-stats">
                            <span class="goal-current">2.8h</span>
                            <span class="goal-target">/ 3h</span>
                        </div>
                    </div>
                    
                    <div class="goal-item">
                        <div class="goal-header">
                            <span class="goal-icon">üò¥</span>
                            <span class="goal-name">Sleep 8 hours</span>
                        </div>
                        <div class="goal-progress-bar success">
                            <div class="goal-progress-fill" style="width: 97%"></div>
                        </div>
                        <div class="goal-stats">
                            <span class="goal-current">7.8h</span>
                            <span class="goal-target">/ 8h</span>
                        </div>
                    </div>
                </div>
                
                <!-- Activity Streak -->
                <div class="streak-widget">
                    <h3 class="widget-title-sidebar">Activity Streak</h3>
                    <div class="streak-display">
                        <div class="streak-number">üî• 12</div>
                        <div class="streak-label">Days in a row</div>
                    </div>
                    <div class="streak-calendar">
                        <div class="streak-day active">M</div>
                        <div class="streak-day active">T</div>
                        <div class="streak-day active">W</div>
                        <div class="streak-day active">T</div>
                        <div class="streak-day active">F</div>
                        <div class="streak-day">S</div>
                        <div class="streak-day">S</div>
                    </div>
                    <p class="streak-message">Keep it up! You're on fire! üöÄ</p>
                </div>
                
                <!-- Recent Activities -->
                <div class="recent-activities-widget">
                    <h3 class="widget-title-sidebar">Recent Activities</h3>
                    <div class="activity-timeline">
                        <div class="timeline-item">
                            <div class="timeline-dot working"></div>
                            <div class="timeline-content">
                                <div class="timeline-title">Working on Project</div>
                                <div class="timeline-time">2 hours ago</div>
                            </div>
                        </div>
                        
                        <div class="timeline-item">
                            <div class="timeline-dot phone"></div>
                            <div class="timeline-content">
                                <div class="timeline-title">Phone Break</div>
                                <div class="timeline-time">4 hours ago</div>
                            </div>
                        </div>
                        
                        <div class="timeline-item">
                            <div class="timeline-dot eating"></div>
                            <div class="timeline-content">
                                <div class="timeline-title">Lunch Time</div>
                                <div class="timeline-time">5 hours ago</div>
                            </div>
                        </div>
                        
                        <div class="timeline-item">
                            <div class="timeline-dot working"></div>
                            <div class="timeline-content">
                                <div class="timeline-title">Morning Session</div>
                                <div class="timeline-time">7 hours ago</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Insights Card -->
                <div class="insights-widget">
                    <h3 class="widget-title-sidebar">üí° Daily Insights</h3>
                    <div class="insight-item">
                        <div class="insight-icon">üìà</div>
                        <div class="insight-text">
                            <strong>Great focus!</strong> You're 25% more productive than yesterday
                        </div>
                    </div>
                    <div class="insight-item">
                        <div class="insight-icon">‚ö†Ô∏è</div>
                        <div class="insight-text">
                            <strong>Screen time alert:</strong> You're close to your 3-hour limit
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    
    <!-- Edit Profile Modal -->
    <div id="editProfileModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Edit Profile</h2>
                <button class="modal-close" onclick="closeEditProfileModal()">&times;</button>
            </div>
            <form id="editProfileForm" class="modal-form">
                <div class="form-row">
                    <div class="form-group">
                        <label for="editFullName">Full Name</label>
                        <input type="text" id="editFullName" name="full_name" required>
                    </div>
                    <div class="form-group">
                        <label for="editUsername">Username</label>
                        <input type="text" id="editUsername" name="username" required>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="editEmail">Email</label>
                    <input type="email" id="editEmail" name="email" required>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="editGender">Gender</label>
                        <select id="editGender" name="gender">
                            <option value="">Select...</option>
                            <option value="Male">Male</option>
                            <option value="Female">Female</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="editAge">Age</label>
                        <input type="number" id="editAge" name="age" min="1" max="120">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="editHeight">Height (cm)</label>
                        <input type="number" id="editHeight" name="height" step="0.1" min="1">
                    </div>
                    <div class="form-group">
                        <label for="editWeight">Weight (kg)</label>
                        <input type="number" id="editWeight" name="weight" step="0.1" min="1">
                    </div>
                </div>
                
                <div class="modal-actions">
                    <button type="button" class="btn-cancel" onclick="closeEditProfileModal()">Cancel</button>
                    <button type="submit" class="btn-save">Save Changes</button>
                </div>
            </form>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="assets/js/auth.js"></script>
    <script src="assets/js/dashboard.js"></script>
</body>
</html>
